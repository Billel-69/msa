{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\OneDrive\\\\Documents\\\\GitHub\\\\msa\\\\frontend\\\\src\\\\pages\\\\LiveSession.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// Fichier: src/components/LiveSession.jsx\n// VERSION CORRIGÉE - Résout les problèmes d'affichage vidéo et audio\n\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { useSocket } from '../hooks/useSocket';\nimport { useAgoraLive } from '../hooks/useAgoraLive';\nimport axios from 'axios';\nimport { FaArrowLeft, FaPaperPlane, FaUsers, FaVideo, FaVideoSlash, FaCrown, FaUserGraduate, FaChild, FaSignOutAlt, FaMicrophone, FaMicrophoneSlash, FaDesktop, FaStop, FaVolumeUp, FaVolumeMute, FaWifi, FaExclamationTriangle, FaRedo, FaPlay, FaPause, FaPlayCircle } from 'react-icons/fa';\nimport './LiveSession.css';\n\n// ==========================================\n// COMPOSANT VIDÉO DISTANTE - CORRIGÉ\n// ==========================================\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RemoteVideoDisplay = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  user,\n  isMain = false\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  useEffect(() => {\n    console.log('🎥 RemoteVideoDisplay - Tentative affichage:', {\n      uid: user.uid,\n      hasVideoTrack: !!user.videoTrack,\n      hasContainer: !!videoRef.current,\n      isMain\n    });\n    if (user.videoTrack && videoRef.current) {\n      try {\n        // IMPORTANT: Nettoyer d'abord le container\n        videoRef.current.innerHTML = '';\n\n        // Jouer la vidéo\n        user.videoTrack.play(videoRef.current);\n        console.log('✅ Vidéo distante affichée pour:', user.uid);\n      } catch (error) {\n        console.error('❌ Erreur affichage vidéo distante:', error, {\n          uid: user.uid,\n          track: user.videoTrack,\n          container: videoRef.current\n        });\n      }\n    } else {\n      console.warn('⚠️ Conditions non remplies pour vidéo distante:', {\n        uid: user.uid,\n        hasTrack: !!user.videoTrack,\n        hasContainer: !!videoRef.current\n      });\n    }\n\n    // Cleanup\n    return () => {\n      if (videoRef.current) {\n        try {\n          videoRef.current.innerHTML = '';\n        } catch (e) {\n          // Ignore cleanup errors\n        }\n      }\n    };\n  }, [user.videoTrack, user.uid]);\n  const containerStyle = isMain ? {\n    width: '100%',\n    height: '400px',\n    background: '#000',\n    borderRadius: '12px'\n  } : {\n    width: '100%',\n    height: '100%',\n    background: '#000',\n    borderRadius: '6px'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: videoRef,\n    className: isMain ? \"remote-video-main\" : \"remote-video\",\n    style: containerStyle\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n}, \"PdMsmLAy5JKU3vCrhAlqGYQfKuA=\")), \"PdMsmLAy5JKU3vCrhAlqGYQfKuA=\");\n\n// ==========================================\n// COMPOSANT PRINCIPAL\n// ==========================================\n_c2 = RemoteVideoDisplay;\nfunction LiveSession() {\n  _s2();\n  var _agoraHook$remoteUser;\n  const {\n    sessionId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user,\n    token\n  } = useAuth();\n\n  // IMPORTANT: Mémoriser ces valeurs pour éviter les recréations\n  const memoizedSessionId = useMemo(() => sessionId, [sessionId]);\n  const memoizedUser = useMemo(() => user, [user === null || user === void 0 ? void 0 : user.id, user === null || user === void 0 ? void 0 : user.name, user === null || user === void 0 ? void 0 : user.accountType]);\n\n  // États de la session\n  const [session, setSession] = useState(null);\n  const [participants, setParticipants] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isParticipant, setIsParticipant] = useState(false);\n\n  // États pour éviter les boucles\n  const [sessionLoaded, setSessionLoaded] = useState(false);\n  const [initialLoadComplete, setInitialLoadComplete] = useState(false);\n\n  // Refs pour éviter les boucles\n  const hasJoinedAgoraRef = useRef(false);\n  const isJoiningRef = useRef(false);\n  const messagesEndRef = useRef(null);\n  const messageInputRef = useRef(null);\n  const localVideoRef = useRef(null);\n  const screenVideoRef = useRef(null);\n\n  // Configuration API\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n  // Socket pour le chat\n  const {\n    isConnected,\n    joinSession,\n    leaveSession,\n    sendMessage,\n    onNewMessage,\n    onJoinedSession,\n    onError\n  } = useSocket();\n\n  // Déterminer si l'utilisateur est professeur STABLE\n  const isTeacher = useMemo(() => {\n    return (user === null || user === void 0 ? void 0 : user.accountType) === 'teacher' || session && session.teacher_id === (user === null || user === void 0 ? void 0 : user.id);\n  }, [user === null || user === void 0 ? void 0 : user.accountType, user === null || user === void 0 ? void 0 : user.id, session === null || session === void 0 ? void 0 : session.teacher_id]);\n\n  // Hook Agora avec paramètres stables\n  const agoraHook = useAgoraLive(memoizedSessionId, memoizedUser, isTeacher);\n\n  // ==========================================\n  // FONCTIONS PRINCIPALES\n  // ==========================================\n\n  // Rejoindre Agora\n  const handleJoinAgora = useCallback(async () => {\n    if (isJoiningRef.current || hasJoinedAgoraRef.current) {\n      console.log('⚠️ Agora: déjà en cours...');\n      return;\n    }\n    try {\n      isJoiningRef.current = true;\n      hasJoinedAgoraRef.current = true;\n      console.log('🎬 Agora: Connexion...');\n      await agoraHook.joinChannel();\n      console.log('✅ Agora: Connecté!');\n\n      // Message de connexion\n      if (isConnected && isParticipant) {\n        sendMessage(memoizedSessionId, `🎥 ${user.name} a rejoint la session vidéo`);\n      }\n    } catch (error) {\n      console.error('❌ Agora: Erreur connexion', error);\n      setError('Impossible de rejoindre la session vidéo');\n      hasJoinedAgoraRef.current = false;\n    } finally {\n      isJoiningRef.current = false;\n    }\n  }, [agoraHook.joinChannel, isConnected, isParticipant, user === null || user === void 0 ? void 0 : user.name, memoizedSessionId, sendMessage]);\n\n  // Démarrer le live\n  const handleStartLive = useCallback(async () => {\n    if (!isTeacher || !session) {\n      return;\n    }\n    try {\n      console.log('▶️ Démarrage du live...');\n      const response = await axios.post(`${API_URL}/api/live/start-session/${session.id}`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('✅ Live démarré:', response.data);\n      setSession(prev => ({\n        ...prev,\n        status: 'live',\n        started_at: new Date().toISOString()\n      }));\n      if (isConnected && isParticipant) {\n        sendMessage(memoizedSessionId, `🎬 Le professeur a démarré le live !`);\n      }\n      if (!agoraHook.isJoined) {\n        await handleJoinAgora();\n      }\n    } catch (error) {\n      console.error('❌ Erreur démarrage live:', error);\n      setError('Impossible de démarrer le live');\n    }\n  }, [isTeacher, session, API_URL, token, isConnected, isParticipant, sendMessage, memoizedSessionId, agoraHook.isJoined, handleJoinAgora]);\n\n  // Arrêter le live\n  const handleStopLive = useCallback(async () => {\n    if (!isTeacher || !session) {\n      return;\n    }\n    if (!window.confirm('Êtes-vous sûr de vouloir arrêter le live ?')) {\n      return;\n    }\n    try {\n      console.log('⏹️ Arrêt du live...');\n      const response = await axios.post(`${API_URL}/api/live/end-session/${session.id}`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('✅ Live arrêté:', response.data);\n      setSession(prev => ({\n        ...prev,\n        status: 'ended',\n        ended_at: new Date().toISOString()\n      }));\n      if (isConnected && isParticipant) {\n        sendMessage(memoizedSessionId, `🔚 Le professeur a arrêté le live.`);\n      }\n      await agoraHook.leaveChannel();\n      setTimeout(() => {\n        navigate('/live');\n      }, 2000);\n    } catch (error) {\n      console.error('❌ Erreur arrêt live:', error);\n      setError('Impossible d\\'arrêter le live');\n    }\n  }, [isTeacher, session, API_URL, token, isConnected, isParticipant, sendMessage, memoizedSessionId, agoraHook.leaveChannel, navigate]);\n\n  // ==========================================\n  // NOUVEAU: Fonction pour débloquer l'audio\n  // ==========================================\n  const handleEnableAudioPlayback = useCallback(async () => {\n    try {\n      await agoraHook.enableAudioPlayback();\n      console.log('✅ Audio playback enabled');\n    } catch (error) {\n      console.error('❌ Failed to enable audio playback:', error);\n    }\n  }, [agoraHook.enableAudioPlayback]);\n\n  // ==========================================\n  // EFFETS\n  // ==========================================\n\n  // EFFET 1: Chargement initial UNIQUE\n  useEffect(() => {\n    if (!token || !user || initialLoadComplete) {\n      return;\n    }\n    if (!user.id) {\n      navigate('/connexion');\n      return;\n    }\n    console.log('🎯 PREMIÈRE FOIS - Chargement session...');\n    setInitialLoadComplete(true);\n    fetchSessionDetails();\n    return () => {\n      console.log('🧹 Nettoyage composant LiveSession');\n    };\n  }, [token, user === null || user === void 0 ? void 0 : user.id, initialLoadComplete]);\n\n  // EFFET 2: Rejoindre Agora UNE SEULE FOIS\n  useEffect(() => {\n    if (!sessionLoaded || !isParticipant || hasJoinedAgoraRef.current || agoraHook.isJoined || agoraHook.isConnecting || isJoiningRef.current) {\n      return;\n    }\n    console.log('🚀 CONDITIONS OK - Rejoindre Agora');\n    handleJoinAgora();\n  }, [sessionLoaded, isParticipant, agoraHook.isJoined, agoraHook.isConnecting, handleJoinAgora]);\n\n  // EFFET 3: Gestion des nouveaux messages\n  useEffect(() => {\n    if (!onNewMessage) return;\n    const unsubscribe = onNewMessage(message => {\n      var _message$message;\n      console.log('💬 Nouveau message:', ((_message$message = message.message) === null || _message$message === void 0 ? void 0 : _message$message.substring(0, 30)) + '...');\n      setMessages(prev => [...prev, message]);\n    });\n    return unsubscribe;\n  }, [onNewMessage]);\n\n  // EFFET 4: Scroll des messages\n  useEffect(() => {\n    if (messages.length > 0) {\n      scrollToBottom();\n    }\n  }, [messages.length]);\n\n  // EFFET 5: Vidéo locale - CORRIGÉ\n  useEffect(() => {\n    console.log('🔄 EFFET VIDÉO LOCALE - État actuel:', {\n      hasLocalVideoTrack: !!agoraHook.localVideoTrack,\n      hasContainer: !!localVideoRef.current,\n      isVideoEnabled: agoraHook.isVideoEnabled,\n      isScreenSharing: agoraHook.isScreenSharing,\n      isJoined: agoraHook.isJoined,\n      isTeacher: isTeacher\n    });\n    if (agoraHook.localVideoTrack && localVideoRef.current && !agoraHook.isScreenSharing && agoraHook.isVideoEnabled) {\n      try {\n        console.log('🎥 ✅ AFFICHAGE VIDÉO LOCALE - Conditions remplies');\n\n        // Nettoyer d'abord\n        localVideoRef.current.innerHTML = '';\n\n        // Lancer la vidéo\n        agoraHook.localVideoTrack.play(localVideoRef.current);\n        console.log('✅ ✅ VIDÉO LOCALE LANCÉE AVEC SUCCÈS');\n      } catch (error) {\n        console.error('❌ ❌ ERREUR CRITIQUE VIDÉO LOCALE:', error);\n      }\n    } else {\n      console.log('⚠️ CONDITIONS NON REMPLIES pour vidéo locale:', {\n        hasTrack: !!agoraHook.localVideoTrack,\n        hasContainer: !!localVideoRef.current,\n        isEnabled: agoraHook.isVideoEnabled,\n        notScreenShare: !agoraHook.isScreenSharing\n      });\n    }\n  }, [agoraHook.localVideoTrack, agoraHook.isVideoEnabled, agoraHook.isScreenSharing, agoraHook.isJoined, isTeacher]);\n\n  // EFFET 6: Partage d'écran\n  useEffect(() => {\n    if (agoraHook.screenTrack && screenVideoRef.current) {\n      try {\n        console.log('🖥️ Affichage partage d\\'écran');\n        agoraHook.screenTrack.play(screenVideoRef.current);\n      } catch (error) {\n        console.error('❌ Erreur partage d\\'écran:', error);\n      }\n    }\n  }, [agoraHook.screenTrack]);\n\n  // ==========================================\n  // FONCTIONS MÉTIER\n  // ==========================================\n\n  const fetchSessionDetails = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('📡 API: Récupération session', memoizedSessionId);\n      const response = await axios.get(`${API_URL}/api/live/session/${memoizedSessionId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const sessionData = response.data.session;\n      const participantsData = response.data.participants || [];\n      const isParticipantData = response.data.isParticipant;\n      console.log('✅ Données reçues:', {\n        session: sessionData === null || sessionData === void 0 ? void 0 : sessionData.title,\n        participants: participantsData.length,\n        isParticipant: isParticipantData\n      });\n      setSession(sessionData);\n      setParticipants(participantsData);\n      setIsParticipant(isParticipantData);\n      if (!isParticipantData) {\n        console.log('⚠️ Connexion nécessaire...');\n        await handleJoinSessionAPI();\n      } else {\n        console.log('✅ Déjà connecté, chargement messages...');\n        await loadMessages();\n      }\n      setSessionLoaded(true);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('❌ Erreur fetch session:', error);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Impossible de charger la session');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleJoinSessionAPI = async () => {\n    try {\n      console.log('🔐 Connexion API...');\n      const response = await axios.post(`${API_URL}/api/live/join-session/${memoizedSessionId}`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('✅ Connexion API réussie');\n      setIsParticipant(true);\n      await loadMessages();\n    } catch (error) {\n      var _error$response2;\n      console.error('❌ Erreur connexion API:', error);\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n        const password = prompt('Mot de passe requis :');\n        if (password) {\n          try {\n            await axios.post(`${API_URL}/api/live/join-session/${memoizedSessionId}`, {\n              password\n            }, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            setIsParticipant(true);\n            await loadMessages();\n          } catch (passwordError) {\n            setError('Mot de passe incorrect');\n          }\n        }\n      } else {\n        setError('Impossible de rejoindre la session');\n      }\n    }\n  };\n  const loadMessages = async () => {\n    try {\n      console.log('💬 Chargement messages...');\n      const response = await axios.get(`${API_URL}/api/live/session/${memoizedSessionId}/chat`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessages(response.data || []);\n    } catch (error) {\n      console.warn('⚠️ Messages non disponibles:', error);\n      setMessages([]);\n    }\n  };\n  const handleRetryAgora = useCallback(async () => {\n    setError(null);\n    hasJoinedAgoraRef.current = false;\n    isJoiningRef.current = false;\n    await handleJoinAgora();\n  }, [handleJoinAgora]);\n  const handleSendMessage = useCallback(e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !isConnected || !isParticipant) {\n      return;\n    }\n    console.log('💬 Envoi:', newMessage.trim());\n    sendMessage(memoizedSessionId, newMessage.trim());\n    setNewMessage('');\n    setTimeout(() => {\n      var _messageInputRef$curr;\n      (_messageInputRef$curr = messageInputRef.current) === null || _messageInputRef$curr === void 0 ? void 0 : _messageInputRef$curr.focus();\n    }, 100);\n  }, [newMessage, isConnected, isParticipant, sendMessage, memoizedSessionId]);\n  const handleLeaveSession = useCallback(async () => {\n    if (window.confirm('Êtes-vous sûr de vouloir quitter cette session ?')) {\n      try {\n        await agoraHook.leaveChannel();\n        if (isConnected && isParticipant) {\n          leaveSession(memoizedSessionId);\n        }\n        navigate('/live');\n      } catch (error) {\n        console.error('❌ Erreur départ:', error);\n        navigate('/live');\n      }\n    }\n  }, [agoraHook.leaveChannel, isConnected, isParticipant, leaveSession, memoizedSessionId, navigate]);\n\n  // Contrôles média - CORRIGÉS\n  const handleToggleCamera = useCallback(async () => {\n    console.log('🎥 TOGGLE CAMÉRA - État actuel:', {\n      isVideoEnabled: agoraHook.isVideoEnabled,\n      hasLocalTrack: !!agoraHook.localVideoTrack,\n      isJoined: agoraHook.isJoined,\n      isTeacher: isTeacher\n    });\n    try {\n      if (agoraHook.isVideoEnabled) {\n        console.log('📹 DÉSACTIVATION caméra...');\n        await agoraHook.disableCamera();\n        if (isConnected && isParticipant) {\n          sendMessage(memoizedSessionId, `📹 ${user.name} a désactivé sa caméra`);\n        }\n        console.log('✅ Caméra désactivée');\n      } else {\n        console.log('📹 ACTIVATION caméra...');\n        await agoraHook.enableCamera();\n        if (isConnected && isParticipant) {\n          sendMessage(memoizedSessionId, `📹 ${user.name} a activé sa caméra`);\n        }\n        console.log('✅ Caméra activée');\n      }\n    } catch (error) {\n      console.error('❌ ❌ ERREUR CRITIQUE CAMÉRA:', error);\n    }\n  }, [agoraHook.isVideoEnabled, agoraHook.enableCamera, agoraHook.disableCamera, isConnected, isParticipant, sendMessage, memoizedSessionId, user === null || user === void 0 ? void 0 : user.name, isTeacher]);\n  const handleToggleAudio = useCallback(async () => {\n    console.log('🎤 TOGGLE AUDIO - État actuel:', {\n      isAudioEnabled: agoraHook.isAudioEnabled,\n      hasLocalAudioTrack: !!agoraHook.localAudioTrack,\n      isJoined: agoraHook.isJoined,\n      isMuted: agoraHook.isMuted\n    });\n    try {\n      if (agoraHook.isAudioEnabled) {\n        console.log('🔇 DÉSACTIVATION audio...');\n        await agoraHook.disableAudio();\n        if (isConnected && isParticipant) {\n          sendMessage(memoizedSessionId, `🎤 ${user.name} a désactivé son micro`);\n        }\n        console.log('✅ Audio désactivé');\n      } else {\n        console.log('🔊 ACTIVATION audio...');\n        await agoraHook.enableAudio();\n        if (isConnected && isParticipant) {\n          sendMessage(memoizedSessionId, `🎤 ${user.name} a activé son micro`);\n        }\n        console.log('✅ Audio activé');\n      }\n    } catch (error) {\n      console.error('❌ ❌ ERREUR CRITIQUE AUDIO:', error);\n    }\n  }, [agoraHook.isAudioEnabled, agoraHook.enableAudio, agoraHook.disableAudio, isConnected, isParticipant, sendMessage, memoizedSessionId, user === null || user === void 0 ? void 0 : user.name]);\n  const handleToggleScreenShare = useCallback(async () => {\n    try {\n      if (agoraHook.isScreenSharing) {\n        await agoraHook.stopScreenShare();\n        if (isConnected && isParticipant) {\n          sendMessage(memoizedSessionId, `🖥️ ${user.name} a arrêté le partage d'écran`);\n        }\n      } else {\n        await agoraHook.startScreenShare();\n        if (isConnected && isParticipant) {\n          sendMessage(memoizedSessionId, `🖥️ ${user.name} partage son écran`);\n        }\n      }\n    } catch (error) {\n      console.error('❌ Erreur partage d\\'écran:', error);\n    }\n  }, [agoraHook.isScreenSharing, agoraHook.startScreenShare, agoraHook.stopScreenShare, isConnected, isParticipant, sendMessage, memoizedSessionId, user === null || user === void 0 ? void 0 : user.name]);\n\n  // ==========================================\n  // FONCTIONS UTILITAIRES\n  // ==========================================\n\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const formatTime = dateString => {\n    return new Date(dateString).toLocaleTimeString('fr-FR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const getUserIcon = accountType => {\n    switch (accountType) {\n      case 'teacher':\n        return /*#__PURE__*/_jsxDEV(FaUserGraduate, {\n          className: \"user-icon teacher\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 36\n        }, this);\n      case 'parent':\n        return /*#__PURE__*/_jsxDEV(FaCrown, {\n          className: \"user-icon parent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 35\n        }, this);\n      case 'child':\n        return /*#__PURE__*/_jsxDEV(FaChild, {\n          className: \"user-icon child\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 34\n        }, this);\n      default:\n        return null;\n    }\n  };\n  const getNetworkQualityStatus = () => {\n    if (agoraHook.networkQuality >= 4) return {\n      icon: FaWifi,\n      color: '#28a745'\n    };\n    if (agoraHook.networkQuality >= 2) return {\n      icon: FaWifi,\n      color: '#ffc107'\n    };\n    return {\n      icon: FaExclamationTriangle,\n      color: '#dc3545'\n    };\n  };\n\n  // ==========================================\n  // RENDU CONDITIONNEL\n  // ==========================================\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"live-session-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Chargement de la session...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 13\n    }, this);\n  }\n  if (error && !session) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"live-session-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Erreur\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/live'),\n          className: \"back-btn\",\n          children: \"Retour au menu Live\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 13\n    }, this);\n  }\n  const networkStatus = getNetworkQualityStatus();\n  const NetworkIcon = networkStatus.icon;\n\n  // ==========================================\n  // RENDU PRINCIPAL\n  // ==========================================\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"live-session-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"session-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/live'),\n          className: \"live-session-back-button\",\n          children: /*#__PURE__*/_jsxDEV(FaArrowLeft, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"session-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"session-status\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `status-indicator ${(session === null || session === void 0 ? void 0 : session.status) === 'live' ? 'live' : (session === null || session === void 0 ? void 0 : session.status) === 'ended' ? 'ended' : 'waiting'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"status-text\",\n              children: (session === null || session === void 0 ? void 0 : session.status) === 'live' ? 'EN DIRECT' : (session === null || session === void 0 ? void 0 : session.status) === 'ended' ? 'TERMINÉ' : 'EN ATTENTE'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: session === null || session === void 0 ? void 0 : session.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"session-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Par \", session === null || session === void 0 ? void 0 : session.teacher_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: session === null || session === void 0 ? void 0 : session.subject\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Code: \", session === null || session === void 0 ? void 0 : session.room_code]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-right\",\n        children: [isTeacher && isParticipant && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"live-control-section\",\n          children: [(session === null || session === void 0 ? void 0 : session.status) === 'waiting' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleStartLive,\n            className: \"start-live-btn\",\n            disabled: agoraHook.isConnecting,\n            children: [/*#__PURE__*/_jsxDEV(FaPlay, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 37\n            }, this), \" D\\xE9marrer le Live\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 33\n          }, this), (session === null || session === void 0 ? void 0 : session.status) === 'live' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleStopLive,\n            className: \"stop-live-btn\",\n            children: [/*#__PURE__*/_jsxDEV(FaStop, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 37\n            }, this), \" Arr\\xEAter le Live\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 25\n        }, this), isParticipant && agoraHook.isJoined && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"teacher-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleToggleCamera,\n            className: `control-btn video-btn ${agoraHook.isVideoEnabled ? 'active' : ''}`,\n            title: agoraHook.isVideoEnabled ? 'Désactiver la caméra' : 'Activer la caméra',\n            disabled: agoraHook.isConnecting,\n            children: agoraHook.isVideoEnabled ? /*#__PURE__*/_jsxDEV(FaVideo, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 713,\n              columnNumber: 61\n            }, this) : /*#__PURE__*/_jsxDEV(FaVideoSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 713,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleToggleAudio,\n            className: `control-btn audio-btn ${agoraHook.isAudioEnabled ? 'active' : ''}`,\n            title: agoraHook.isAudioEnabled ? 'Désactiver le micro' : 'Activer le micro',\n            disabled: agoraHook.isConnecting,\n            children: agoraHook.isAudioEnabled ? /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 61\n            }, this) : /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 80\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 29\n          }, this), agoraHook.isAudioEnabled && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: agoraHook.toggleMute,\n            className: `control-btn mute-btn ${agoraHook.isMuted ? 'muted' : ''}`,\n            title: agoraHook.isMuted ? 'Réactiver le son' : 'Couper le son',\n            children: agoraHook.isMuted ? /*#__PURE__*/_jsxDEV(FaVolumeMute, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 58\n            }, this) : /*#__PURE__*/_jsxDEV(FaVolumeUp, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 77\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 33\n          }, this), isTeacher && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleToggleScreenShare,\n            className: `control-btn screen-btn ${agoraHook.isScreenSharing ? 'active' : ''}`,\n            title: agoraHook.isScreenSharing ? 'Arrêter le partage' : 'Partager l\\'écran',\n            disabled: agoraHook.isConnecting || !agoraHook.isJoined,\n            children: agoraHook.isScreenSharing ? /*#__PURE__*/_jsxDEV(FaStop, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 66\n            }, this) : /*#__PURE__*/_jsxDEV(FaDesktop, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 79\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connection-status\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `status-indicator ${isConnected && agoraHook.isJoined ? 'connected' : 'disconnected'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 750,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: isConnected && agoraHook.isJoined ? 'Connecté' : 'Déconnecté'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(NetworkIcon, {\n            style: {\n              color: networkStatus.color,\n              marginLeft: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"participants-count\",\n          children: [/*#__PURE__*/_jsxDEV(FaUsers, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: participants.length + agoraHook.remoteUsers.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 757,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLeaveSession,\n          className: \"leave-button\",\n          children: [/*#__PURE__*/_jsxDEV(FaSignOutAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 25\n          }, this), \"Quitter\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 13\n    }, this), (agoraHook.connectionError || error) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-banner\",\n      children: [/*#__PURE__*/_jsxDEV(FaExclamationTriangle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 770,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: agoraHook.connectionError || error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 21\n      }, this), agoraHook.connectionError && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRetryAgora,\n        className: \"retry-connection-btn\",\n        children: [/*#__PURE__*/_jsxDEV(FaRedo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 29\n        }, this), \" R\\xE9essayer\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 17\n    }, this), agoraHook.audioAutoplayBlocked && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-banner\",\n      style: {\n        background: 'linear-gradient(45deg, #ff9800, #f57c00)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(FaPlayCircle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Son bloqu\\xE9 par le navigateur. Cliquez pour activer l'audio.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 784,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEnableAudioPlayback,\n        className: \"retry-connection-btn\",\n        children: [/*#__PURE__*/_jsxDEV(FaPlayCircle, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 786,\n          columnNumber: 25\n        }, this), \" Activer le son\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 782,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"session-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"main-video-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-display-area\",\n              children: [agoraHook.isScreenSharing && agoraHook.screenTrack ?\n              /*#__PURE__*/\n              /* Partage d'écran */\n              _jsxDEV(\"div\", {\n                className: \"screen-share-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  ref: screenVideoRef,\n                  className: \"screen-video\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 804,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"video-overlay\",\n                  children: [\"\\uD83D\\uDDA5\\uFE0F Partage d'\\xE9cran - \", user === null || user === void 0 ? void 0 : user.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 805,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 803,\n                columnNumber: 37\n              }, this) :\n              /*#__PURE__*/\n              /* Zone vidéo CORRIGÉE */\n              _jsxDEV(\"div\", {\n                className: \"video-streams-container\",\n                children: [isTeacher && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"teacher-own-video\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    ref: localVideoRef,\n                    className: \"video-element\",\n                    style: {\n                      width: '100%',\n                      height: '400px',\n                      background: '#000',\n                      borderRadius: '12px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 816,\n                    columnNumber: 49\n                  }, this), !agoraHook.isVideoEnabled && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"video-placeholder-overlay\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"video-placeholder-icon\",\n                      children: /*#__PURE__*/_jsxDEV(FaVideo, {\n                        size: 60\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 829,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 828,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                      children: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB Vous (Professeur)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 831,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Activez votre cam\\xE9ra pour que les \\xE9l\\xE8ves vous voient\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 832,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: handleToggleCamera,\n                      className: \"activate-camera-btn\",\n                      children: [/*#__PURE__*/_jsxDEV(FaVideo, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 837,\n                        columnNumber: 61\n                      }, this), \" Activer la cam\\xE9ra\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 833,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 827,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"video-overlay\",\n                    children: [\"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB Vous (Professeur) - Les \\xE9l\\xE8ves vous voient\", agoraHook.isAudioEnabled ? agoraHook.isMuted ? ' 🔇' : ' 🎤' : ' 🔇']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 841,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 815,\n                  columnNumber: 45\n                }, this), !isTeacher && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"student-sees-teacher\",\n                  children: [agoraHook.remoteUsers.length > 0 ?\n                  /*#__PURE__*/\n                  /* Il y a un professeur connecté */\n                  _jsxDEV(\"div\", {\n                    className: \"teacher-video-for-student\",\n                    children: (() => {\n                      // Trouver le professeur avec vidéo\n                      const teacherWithVideo = agoraHook.remoteUsers.find(u => u.hasVideo && u.videoTrack);\n                      if (teacherWithVideo) {\n                        console.log('✅ PROFESSEUR AVEC VIDÉO TROUVÉ:', teacherWithVideo.uid);\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            position: 'relative',\n                            width: '100%',\n                            height: '400px'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(RemoteVideoDisplay, {\n                            user: teacherWithVideo,\n                            isMain: true\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 862,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"video-overlay\",\n                            children: [\"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB Professeur \", teacherWithVideo.uid, teacherWithVideo.hasAudio ? ' 🎤' : ' 🔇']\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 866,\n                            columnNumber: 73\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 861,\n                          columnNumber: 69\n                        }, this);\n                      } else {\n                        // Professeur connecté mais pas de vidéo\n                        const anyTeacher = agoraHook.remoteUsers[0];\n                        console.log('⚠️ PROFESSEUR SANS VIDÉO:', anyTeacher === null || anyTeacher === void 0 ? void 0 : anyTeacher.uid);\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            width: '100%',\n                            height: '400px',\n                            background: '#1a1a1a',\n                            borderRadius: '12px',\n                            display: 'flex',\n                            flexDirection: 'column',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            color: 'white',\n                            position: 'relative'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(FaVideo, {\n                            style: {\n                              fontSize: '60px',\n                              marginBottom: '20px',\n                              color: '#666'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 889,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                            children: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB Professeur connect\\xE9\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 890,\n                            columnNumber: 73\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            children: \"En attente que le professeur active sa cam\\xE9ra...\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 891,\n                            columnNumber: 73\n                          }, this), anyTeacher && /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"video-overlay\",\n                            children: [\"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB Prof \", anyTeacher.uid, \" (cam\\xE9ra \\xE9teinte)\", anyTeacher.hasAudio ? ' 🎤' : ' 🔇']\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 893,\n                            columnNumber: 77\n                          }, this), anyTeacher && /*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              position: 'absolute',\n                              top: 0,\n                              left: 0,\n                              width: '100%',\n                              height: '100%',\n                              opacity: 0,\n                              pointerEvents: 'none'\n                            },\n                            children: /*#__PURE__*/_jsxDEV(RemoteVideoDisplay, {\n                              user: anyTeacher,\n                              isMain: true\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 912,\n                              columnNumber: 81\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 901,\n                            columnNumber: 77\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 877,\n                          columnNumber: 69\n                        }, this);\n                      }\n                    })()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 853,\n                    columnNumber: 53\n                  }, this) :\n                  /*#__PURE__*/\n                  /* Pas de professeur */\n                  _jsxDEV(\"div\", {\n                    className: \"waiting-for-teacher-simple\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        width: '100%',\n                        height: '400px',\n                        background: '#1a1a1a',\n                        borderRadius: '12px',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: 'white'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(FaVideo, {\n                        style: {\n                          fontSize: '60px',\n                          marginBottom: '20px',\n                          color: '#666'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 937,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        children: \"En attente du professeur...\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 938,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"Le professeur va bient\\xF4t se connecter\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 939,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 926,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 925,\n                    columnNumber: 53\n                  }, this), agoraHook.localVideoTrack && agoraHook.isVideoEnabled && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"self-video-miniature\",\n                    style: {\n                      position: 'absolute',\n                      top: '20px',\n                      right: '20px',\n                      width: '200px',\n                      height: '150px',\n                      background: '#000',\n                      borderRadius: '8px',\n                      border: '2px solid #fff',\n                      zIndex: 10\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      ref: localVideoRef,\n                      style: {\n                        width: '100%',\n                        height: '100%',\n                        borderRadius: '6px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 957,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        position: 'absolute',\n                        bottom: '5px',\n                        left: '5px',\n                        background: 'rgba(0,0,0,0.8)',\n                        color: 'white',\n                        padding: '2px 6px',\n                        borderRadius: '4px',\n                        fontSize: '12px'\n                      },\n                      children: \"Vous\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 965,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 946,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 850,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 811,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"debug-simple\",\n                style: {\n                  position: 'absolute',\n                  top: '10px',\n                  left: '10px',\n                  background: 'rgba(0, 0, 0, 0.9)',\n                  color: 'white',\n                  padding: '10px',\n                  borderRadius: '8px',\n                  fontSize: '12px',\n                  zIndex: 20,\n                  fontFamily: 'monospace',\n                  minWidth: '180px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: isTeacher ? '👨‍🏫 PROF' : '👤 ÉLÈVE'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 998,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 998,\n                  columnNumber: 93\n                }, this), \"Agora: \", agoraHook.isJoined ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 999,\n                  columnNumber: 76\n                }, this), isTeacher ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\"Ma cam\\xE9ra: \", agoraHook.isVideoEnabled ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1002,\n                    columnNumber: 94\n                  }, this), \"Mon micro: \", agoraHook.isAudioEnabled ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1003,\n                    columnNumber: 94\n                  }, this), \"Mut\\xE9: \", agoraHook.isMuted ? '🔇' : '🔊', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1004,\n                    columnNumber: 84\n                  }, this), \"\\xC9l\\xE8ves: \", agoraHook.remoteUsers.length, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1005,\n                    columnNumber: 83\n                  }, this), agoraHook.remoteUsers.map((u, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"E\", i + 1, \": V\", u.hasVideo ? '✅' : '❌', \" A\", u.hasAudio ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1008,\n                      columnNumber: 112\n                    }, this)]\n                  }, u.uid, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1007,\n                    columnNumber: 49\n                  }, this))]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\"Prof connect\\xE9: \", agoraHook.remoteUsers.length > 0 ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1014,\n                    columnNumber: 106\n                  }, this), agoraHook.remoteUsers.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [\"Vid\\xE9o prof: \", agoraHook.remoteUsers.some(u => u.hasVideo && u.videoTrack) ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1017,\n                      columnNumber: 138\n                    }, this), \"Audio prof: \", agoraHook.remoteUsers.some(u => u.hasAudio && u.audioTrack) ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1018,\n                      columnNumber: 138\n                    }, this), \"Prof UID: \", (_agoraHook$remoteUser = agoraHook.remoteUsers[0]) === null || _agoraHook$remoteUser === void 0 ? void 0 : _agoraHook$remoteUser.uid, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1019,\n                      columnNumber: 94\n                    }, this)]\n                  }, void 0, true), \"Ma cam\\xE9ra: \", agoraHook.isVideoEnabled ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1022,\n                    columnNumber: 94\n                  }, this), \"Mon micro: \", agoraHook.isAudioEnabled ? '✅' : '❌']\n                }, void 0, true), agoraHook.connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    color: '#ff4444',\n                    marginTop: '5px'\n                  },\n                  children: [\"\\u274C \", agoraHook.connectionError]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1027,\n                  columnNumber: 41\n                }, this), agoraHook.audioAutoplayBlocked && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    color: '#ff9800',\n                    marginTop: '5px'\n                  },\n                  children: \"\\uD83D\\uDD0A Audio bloqu\\xE9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1032,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 985,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 800,\n              columnNumber: 29\n            }, this), agoraHook.remoteUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"secondary-videos\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: isTeacher ? `Élèves connectés (${agoraHook.remoteUsers.length})` : `Autres participants (${agoraHook.remoteUsers.length > 1 ? agoraHook.remoteUsers.length - 1 : 0})`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1042,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"remote-videos-grid\",\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n                  gap: '12px',\n                  marginTop: '12px'\n                },\n                children: isTeacher ? (/* PROFESSEUR: Affiche TOUS les élèves */\n                agoraHook.remoteUsers.map(remoteUser => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"secondary-video-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"secondary-video-container\",\n                    children: remoteUser.hasVideo && remoteUser.videoTrack ? /*#__PURE__*/_jsxDEV(RemoteVideoDisplay, {\n                      user: remoteUser\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1060,\n                      columnNumber: 61\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"video-placeholder-secondary\",\n                      style: {\n                        width: '100%',\n                        height: '120px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        background: '#1a1a1a',\n                        borderRadius: '8px'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(FaVideo, {\n                        size: 20,\n                        style: {\n                          color: '#666'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1071,\n                        columnNumber: 65\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1062,\n                      columnNumber: 61\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1058,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"secondary-video-label\",\n                    children: [\"\\uD83D\\uDC64 \\xC9l\\xE8ve \", remoteUser.uid, remoteUser.hasAudio ? ' 🎤' : ' 🔇']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1075,\n                    columnNumber: 53\n                  }, this)]\n                }, remoteUser.uid, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1057,\n                  columnNumber: 49\n                }, this))) : (/* ÉLÈVE: Affiche les autres élèves (pas le prof qui est en grand) */\n                agoraHook.remoteUsers.slice(1).map(remoteUser => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"secondary-video-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"secondary-video-container\",\n                    children: remoteUser.hasVideo && remoteUser.videoTrack ? /*#__PURE__*/_jsxDEV(RemoteVideoDisplay, {\n                      user: remoteUser\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1087,\n                      columnNumber: 61\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"video-placeholder-secondary\",\n                      style: {\n                        width: '100%',\n                        height: '120px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        background: '#1a1a1a',\n                        borderRadius: '8px'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(FaVideo, {\n                        size: 20,\n                        style: {\n                          color: '#666'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1098,\n                        columnNumber: 65\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1089,\n                      columnNumber: 61\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1085,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"secondary-video-label\",\n                    children: [\"\\uD83D\\uDC64 Participant \", remoteUser.uid, remoteUser.hasAudio ? ' 🎤' : ' 🔇']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1102,\n                    columnNumber: 53\n                  }, this)]\n                }, remoteUser.uid, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1084,\n                  columnNumber: 49\n                }, this)))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1048,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1041,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\uD83D\\uDCAC Chat de la session\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-status\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `status-indicator ${isConnected ? 'connected' : 'disconnected'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1120,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: isConnected ? 'En ligne' : 'Hors ligne'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1119,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-messages\",\n            children: [messages.map(message => {\n              var _message$user_name;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `message ${message.message_type} ${message.user_id === user.id ? 'own' : 'other'}`,\n                children: message.message_type === 'system' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"system-message\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: message.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1130,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"time\", {\n                    children: formatTime(message.created_at)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1131,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1129,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [message.user_id !== user.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"message-avatar\",\n                    children: message.profile_picture ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `${API_URL}/uploads/${message.profile_picture}`,\n                      alt: message.user_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1138,\n                      columnNumber: 57\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: (_message$user_name = message.user_name) === null || _message$user_name === void 0 ? void 0 : _message$user_name.charAt(0).toUpperCase()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1140,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1136,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"message-content\",\n                    children: [message.user_id !== user.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"message-header\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"message-author\",\n                        children: message.user_name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1147,\n                        columnNumber: 57\n                      }, this), getUserIcon(message.account_type), /*#__PURE__*/_jsxDEV(\"time\", {\n                        className: \"message-time\",\n                        children: formatTime(message.created_at)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1149,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1146,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"message-bubble\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: message.message\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1153,\n                        columnNumber: 53\n                      }, this), message.user_id === user.id && /*#__PURE__*/_jsxDEV(\"time\", {\n                        className: \"message-time\",\n                        children: formatTime(message.created_at)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1155,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1152,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1144,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true)\n              }, message.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1127,\n                columnNumber: 33\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1163,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendMessage,\n            className: \"chat-input-form\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-input-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                ref: messageInputRef,\n                type: \"text\",\n                value: newMessage,\n                onChange: e => setNewMessage(e.target.value),\n                placeholder: !isParticipant ? \"Rejoindre la session...\" : !isConnected ? \"Chat hors ligne...\" : \"Tapez votre message...\",\n                className: \"chat-input\",\n                maxLength: 500,\n                disabled: !isConnected || !isParticipant\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1168,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"send-button\",\n                disabled: !newMessage.trim() || !isConnected || !isParticipant,\n                children: /*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1187,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1182,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1167,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-status-footer\",\n              children: [!isParticipant && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-connecting\",\n                children: \"\\uD83D\\uDCDD Rejoindre la session...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1191,\n                columnNumber: 52\n              }, this), !isConnected && isParticipant && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-offline\",\n                children: \"\\u274C Chat d\\xE9connect\\xE9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1192,\n                columnNumber: 67\n              }, this), isConnected && !agoraHook.isJoined && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-connecting\",\n                children: \"\\uD83D\\uDD04 Connexion vid\\xE9o...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1193,\n                columnNumber: 72\n              }, this), isConnected && agoraHook.isJoined && isParticipant && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-online\",\n                children: \"\\u2705 En ligne\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1194,\n                columnNumber: 88\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1190,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1166,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 795,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"participants-sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"participants-header\",\n          children: [/*#__PURE__*/_jsxDEV(FaUsers, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1203,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Participants (\", participants.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1204,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"participants-list\",\n          children: participants.map(participant => {\n            var _participant$user_nam;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `participant ${participant.role}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"participant-avatar\",\n                children: participant.profile_picture ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${API_URL}/uploads/${participant.profile_picture}`,\n                  alt: participant.user_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1211,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: (_participant$user_nam = participant.user_name) === null || _participant$user_nam === void 0 ? void 0 : _participant$user_nam.charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1213,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1209,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"participant-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"participant-name\",\n                  children: participant.user_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1217,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"participant-role\",\n                  children: [getUserIcon(participant.role), participant.role === 'teacher' ? 'Professeur' : participant.role === 'parent' ? 'Parent' : 'Élève']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1218,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1216,\n                columnNumber: 33\n              }, this), participant.role === 'teacher' && /*#__PURE__*/_jsxDEV(FaCrown, {\n                className: \"teacher-crown\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1225,\n                columnNumber: 37\n              }, this)]\n            }, participant.user_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1208,\n              columnNumber: 29\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1206,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1201,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 792,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 652,\n    columnNumber: 9\n  }, this);\n}\n_s2(LiveSession, \"xd2nTCgs9n8SNCZUcBwN26QdHSA=\", false, function () {\n  return [useParams, useNavigate, useAuth, useSocket, useAgoraLive];\n});\n_c3 = LiveSession;\nexport default LiveSession;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"RemoteVideoDisplay$React.memo\");\n$RefreshReg$(_c2, \"RemoteVideoDisplay\");\n$RefreshReg$(_c3, \"LiveSession\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","useParams","useNavigate","useAuth","useSocket","useAgoraLive","axios","FaArrowLeft","FaPaperPlane","FaUsers","FaVideo","FaVideoSlash","FaCrown","FaUserGraduate","FaChild","FaSignOutAlt","FaMicrophone","FaMicrophoneSlash","FaDesktop","FaStop","FaVolumeUp","FaVolumeMute","FaWifi","FaExclamationTriangle","FaRedo","FaPlay","FaPause","FaPlayCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","RemoteVideoDisplay","_s","memo","_c","user","isMain","videoRef","console","log","uid","hasVideoTrack","videoTrack","hasContainer","current","innerHTML","play","error","track","container","warn","hasTrack","e","containerStyle","width","height","background","borderRadius","ref","className","style","fileName","_jsxFileName","lineNumber","columnNumber","_c2","LiveSession","_s2","_agoraHook$remoteUser","sessionId","navigate","token","memoizedSessionId","memoizedUser","id","name","accountType","session","setSession","participants","setParticipants","messages","setMessages","newMessage","setNewMessage","loading","setLoading","setError","isParticipant","setIsParticipant","sessionLoaded","setSessionLoaded","initialLoadComplete","setInitialLoadComplete","hasJoinedAgoraRef","isJoiningRef","messagesEndRef","messageInputRef","localVideoRef","screenVideoRef","API_URL","process","env","REACT_APP_API_URL","isConnected","joinSession","leaveSession","sendMessage","onNewMessage","onJoinedSession","onError","isTeacher","teacher_id","agoraHook","handleJoinAgora","joinChannel","handleStartLive","response","post","headers","Authorization","data","prev","status","started_at","Date","toISOString","isJoined","handleStopLive","window","confirm","ended_at","leaveChannel","setTimeout","handleEnableAudioPlayback","enableAudioPlayback","fetchSessionDetails","isConnecting","unsubscribe","message","_message$message","substring","length","scrollToBottom","hasLocalVideoTrack","localVideoTrack","isVideoEnabled","isScreenSharing","isEnabled","notScreenShare","screenTrack","get","sessionData","participantsData","isParticipantData","title","handleJoinSessionAPI","loadMessages","_error$response","_error$response$data","_error$response2","password","prompt","passwordError","handleRetryAgora","handleSendMessage","preventDefault","trim","_messageInputRef$curr","focus","handleLeaveSession","handleToggleCamera","hasLocalTrack","disableCamera","enableCamera","handleToggleAudio","isAudioEnabled","hasLocalAudioTrack","localAudioTrack","isMuted","disableAudio","enableAudio","handleToggleScreenShare","stopScreenShare","startScreenShare","_messagesEndRef$curre","scrollIntoView","behavior","formatTime","dateString","toLocaleTimeString","hour","minute","getUserIcon","getNetworkQualityStatus","networkQuality","icon","color","children","onClick","networkStatus","NetworkIcon","teacher_name","subject","room_code","disabled","toggleMute","marginLeft","remoteUsers","connectionError","audioAutoplayBlocked","size","teacherWithVideo","find","u","hasVideo","position","hasAudio","anyTeacher","display","flexDirection","alignItems","justifyContent","fontSize","marginBottom","top","left","opacity","pointerEvents","right","border","zIndex","bottom","padding","fontFamily","minWidth","map","i","some","audioTrack","marginTop","gridTemplateColumns","gap","remoteUser","slice","_message$user_name","message_type","user_id","created_at","profile_picture","src","alt","user_name","charAt","toUpperCase","account_type","onSubmit","type","value","onChange","target","placeholder","maxLength","participant","_participant$user_nam","role","_c3","$RefreshReg$"],"sources":["C:/Users/Lenovo/OneDrive/Documents/GitHub/msa/frontend/src/pages/LiveSession.jsx"],"sourcesContent":["// Fichier: src/components/LiveSession.jsx\r\n// VERSION CORRIGÉE - Résout les problèmes d'affichage vidéo et audio\r\n\r\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useSocket } from '../hooks/useSocket';\r\nimport { useAgoraLive } from '../hooks/useAgoraLive';\r\nimport axios from 'axios';\r\nimport {\r\n    FaArrowLeft,\r\n    FaPaperPlane,\r\n    FaUsers,\r\n    FaVideo,\r\n    FaVideoSlash,\r\n    FaCrown,\r\n    FaUserGraduate,\r\n    FaChild,\r\n    FaSignOutAlt,\r\n    FaMicrophone,\r\n    FaMicrophoneSlash,\r\n    FaDesktop,\r\n    FaStop,\r\n    FaVolumeUp,\r\n    FaVolumeMute,\r\n    FaWifi,\r\n    FaExclamationTriangle,\r\n    FaRedo,\r\n    FaPlay,\r\n    FaPause,\r\n    FaPlayCircle\r\n} from 'react-icons/fa';\r\nimport './LiveSession.css';\r\n\r\n// ==========================================\r\n// COMPOSANT VIDÉO DISTANTE - CORRIGÉ\r\n// ==========================================\r\n\r\nconst RemoteVideoDisplay = React.memo(({ user, isMain = false }) => {\r\n    const videoRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        console.log('🎥 RemoteVideoDisplay - Tentative affichage:', {\r\n            uid: user.uid,\r\n            hasVideoTrack: !!user.videoTrack,\r\n            hasContainer: !!videoRef.current,\r\n            isMain\r\n        });\r\n\r\n        if (user.videoTrack && videoRef.current) {\r\n            try {\r\n                // IMPORTANT: Nettoyer d'abord le container\r\n                videoRef.current.innerHTML = '';\r\n\r\n                // Jouer la vidéo\r\n                user.videoTrack.play(videoRef.current);\r\n                console.log('✅ Vidéo distante affichée pour:', user.uid);\r\n            } catch (error) {\r\n                console.error('❌ Erreur affichage vidéo distante:', error, {\r\n                    uid: user.uid,\r\n                    track: user.videoTrack,\r\n                    container: videoRef.current\r\n                });\r\n            }\r\n        } else {\r\n            console.warn('⚠️ Conditions non remplies pour vidéo distante:', {\r\n                uid: user.uid,\r\n                hasTrack: !!user.videoTrack,\r\n                hasContainer: !!videoRef.current\r\n            });\r\n        }\r\n\r\n        // Cleanup\r\n        return () => {\r\n            if (videoRef.current) {\r\n                try {\r\n                    videoRef.current.innerHTML = '';\r\n                } catch (e) {\r\n                    // Ignore cleanup errors\r\n                }\r\n            }\r\n        };\r\n    }, [user.videoTrack, user.uid]);\r\n\r\n    const containerStyle = isMain ? {\r\n        width: '100%',\r\n        height: '400px',\r\n        background: '#000',\r\n        borderRadius: '12px'\r\n    } : {\r\n        width: '100%',\r\n        height: '100%',\r\n        background: '#000',\r\n        borderRadius: '6px'\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={videoRef}\r\n            className={isMain ? \"remote-video-main\" : \"remote-video\"}\r\n            style={containerStyle}\r\n        />\r\n    );\r\n});\r\n\r\n// ==========================================\r\n// COMPOSANT PRINCIPAL\r\n// ==========================================\r\n\r\nfunction LiveSession() {\r\n    const { sessionId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { user, token } = useAuth();\r\n\r\n    // IMPORTANT: Mémoriser ces valeurs pour éviter les recréations\r\n    const memoizedSessionId = useMemo(() => sessionId, [sessionId]);\r\n    const memoizedUser = useMemo(() => user, [user?.id, user?.name, user?.accountType]);\r\n\r\n    // États de la session\r\n    const [session, setSession] = useState(null);\r\n    const [participants, setParticipants] = useState([]);\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [isParticipant, setIsParticipant] = useState(false);\r\n\r\n    // États pour éviter les boucles\r\n    const [sessionLoaded, setSessionLoaded] = useState(false);\r\n    const [initialLoadComplete, setInitialLoadComplete] = useState(false);\r\n\r\n    // Refs pour éviter les boucles\r\n    const hasJoinedAgoraRef = useRef(false);\r\n    const isJoiningRef = useRef(false);\r\n    const messagesEndRef = useRef(null);\r\n    const messageInputRef = useRef(null);\r\n    const localVideoRef = useRef(null);\r\n    const screenVideoRef = useRef(null);\r\n\r\n    // Configuration API\r\n    const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n    // Socket pour le chat\r\n    const { isConnected, joinSession, leaveSession, sendMessage, onNewMessage, onJoinedSession, onError } = useSocket();\r\n\r\n    // Déterminer si l'utilisateur est professeur STABLE\r\n    const isTeacher = useMemo(() => {\r\n        return user?.accountType === 'teacher' || (session && session.teacher_id === user?.id);\r\n    }, [user?.accountType, user?.id, session?.teacher_id]);\r\n\r\n    // Hook Agora avec paramètres stables\r\n    const agoraHook = useAgoraLive(memoizedSessionId, memoizedUser, isTeacher);\r\n\r\n    // ==========================================\r\n    // FONCTIONS PRINCIPALES\r\n    // ==========================================\r\n\r\n    // Rejoindre Agora\r\n    const handleJoinAgora = useCallback(async () => {\r\n        if (isJoiningRef.current || hasJoinedAgoraRef.current) {\r\n            console.log('⚠️ Agora: déjà en cours...');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            isJoiningRef.current = true;\r\n            hasJoinedAgoraRef.current = true;\r\n\r\n            console.log('🎬 Agora: Connexion...');\r\n            await agoraHook.joinChannel();\r\n\r\n            console.log('✅ Agora: Connecté!');\r\n\r\n            // Message de connexion\r\n            if (isConnected && isParticipant) {\r\n                sendMessage(memoizedSessionId, `🎥 ${user.name} a rejoint la session vidéo`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('❌ Agora: Erreur connexion', error);\r\n            setError('Impossible de rejoindre la session vidéo');\r\n            hasJoinedAgoraRef.current = false;\r\n        } finally {\r\n            isJoiningRef.current = false;\r\n        }\r\n    }, [agoraHook.joinChannel, isConnected, isParticipant, user?.name, memoizedSessionId, sendMessage]);\r\n\r\n    // Démarrer le live\r\n    const handleStartLive = useCallback(async () => {\r\n        if (!isTeacher || !session) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            console.log('▶️ Démarrage du live...');\r\n\r\n            const response = await axios.post(`${API_URL}/api/live/start-session/${session.id}`, {}, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            console.log('✅ Live démarré:', response.data);\r\n\r\n            setSession(prev => ({\r\n                ...prev,\r\n                status: 'live',\r\n                started_at: new Date().toISOString()\r\n            }));\r\n\r\n            if (isConnected && isParticipant) {\r\n                sendMessage(memoizedSessionId, `🎬 Le professeur a démarré le live !`);\r\n            }\r\n\r\n            if (!agoraHook.isJoined) {\r\n                await handleJoinAgora();\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erreur démarrage live:', error);\r\n            setError('Impossible de démarrer le live');\r\n        }\r\n    }, [isTeacher, session, API_URL, token, isConnected, isParticipant, sendMessage, memoizedSessionId, agoraHook.isJoined, handleJoinAgora]);\r\n\r\n    // Arrêter le live\r\n    const handleStopLive = useCallback(async () => {\r\n        if (!isTeacher || !session) {\r\n            return;\r\n        }\r\n\r\n        if (!window.confirm('Êtes-vous sûr de vouloir arrêter le live ?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            console.log('⏹️ Arrêt du live...');\r\n\r\n            const response = await axios.post(`${API_URL}/api/live/end-session/${session.id}`, {}, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            console.log('✅ Live arrêté:', response.data);\r\n\r\n            setSession(prev => ({\r\n                ...prev,\r\n                status: 'ended',\r\n                ended_at: new Date().toISOString()\r\n            }));\r\n\r\n            if (isConnected && isParticipant) {\r\n                sendMessage(memoizedSessionId, `🔚 Le professeur a arrêté le live.`);\r\n            }\r\n\r\n            await agoraHook.leaveChannel();\r\n\r\n            setTimeout(() => {\r\n                navigate('/live');\r\n            }, 2000);\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erreur arrêt live:', error);\r\n            setError('Impossible d\\'arrêter le live');\r\n        }\r\n    }, [isTeacher, session, API_URL, token, isConnected, isParticipant, sendMessage, memoizedSessionId, agoraHook.leaveChannel, navigate]);\r\n\r\n    // ==========================================\r\n    // NOUVEAU: Fonction pour débloquer l'audio\r\n    // ==========================================\r\n    const handleEnableAudioPlayback = useCallback(async () => {\r\n        try {\r\n            await agoraHook.enableAudioPlayback();\r\n            console.log('✅ Audio playback enabled');\r\n        } catch (error) {\r\n            console.error('❌ Failed to enable audio playback:', error);\r\n        }\r\n    }, [agoraHook.enableAudioPlayback]);\r\n\r\n    // ==========================================\r\n    // EFFETS\r\n    // ==========================================\r\n\r\n    // EFFET 1: Chargement initial UNIQUE\r\n    useEffect(() => {\r\n        if (!token || !user || initialLoadComplete) {\r\n            return;\r\n        }\r\n\r\n        if (!user.id) {\r\n            navigate('/connexion');\r\n            return;\r\n        }\r\n\r\n        console.log('🎯 PREMIÈRE FOIS - Chargement session...');\r\n        setInitialLoadComplete(true);\r\n        fetchSessionDetails();\r\n\r\n        return () => {\r\n            console.log('🧹 Nettoyage composant LiveSession');\r\n        };\r\n    }, [token, user?.id, initialLoadComplete]);\r\n\r\n    // EFFET 2: Rejoindre Agora UNE SEULE FOIS\r\n    useEffect(() => {\r\n        if (!sessionLoaded || !isParticipant || hasJoinedAgoraRef.current || agoraHook.isJoined || agoraHook.isConnecting || isJoiningRef.current) {\r\n            return;\r\n        }\r\n\r\n        console.log('🚀 CONDITIONS OK - Rejoindre Agora');\r\n        handleJoinAgora();\r\n    }, [sessionLoaded, isParticipant, agoraHook.isJoined, agoraHook.isConnecting, handleJoinAgora]);\r\n\r\n    // EFFET 3: Gestion des nouveaux messages\r\n    useEffect(() => {\r\n        if (!onNewMessage) return;\r\n\r\n        const unsubscribe = onNewMessage((message) => {\r\n            console.log('💬 Nouveau message:', message.message?.substring(0, 30) + '...');\r\n            setMessages(prev => [...prev, message]);\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, [onNewMessage]);\r\n\r\n    // EFFET 4: Scroll des messages\r\n    useEffect(() => {\r\n        if (messages.length > 0) {\r\n            scrollToBottom();\r\n        }\r\n    }, [messages.length]);\r\n\r\n    // EFFET 5: Vidéo locale - CORRIGÉ\r\n    useEffect(() => {\r\n        console.log('🔄 EFFET VIDÉO LOCALE - État actuel:', {\r\n            hasLocalVideoTrack: !!agoraHook.localVideoTrack,\r\n            hasContainer: !!localVideoRef.current,\r\n            isVideoEnabled: agoraHook.isVideoEnabled,\r\n            isScreenSharing: agoraHook.isScreenSharing,\r\n            isJoined: agoraHook.isJoined,\r\n            isTeacher: isTeacher\r\n        });\r\n\r\n        if (agoraHook.localVideoTrack && localVideoRef.current && !agoraHook.isScreenSharing && agoraHook.isVideoEnabled) {\r\n            try {\r\n                console.log('🎥 ✅ AFFICHAGE VIDÉO LOCALE - Conditions remplies');\r\n\r\n                // Nettoyer d'abord\r\n                localVideoRef.current.innerHTML = '';\r\n\r\n                // Lancer la vidéo\r\n                agoraHook.localVideoTrack.play(localVideoRef.current);\r\n                console.log('✅ ✅ VIDÉO LOCALE LANCÉE AVEC SUCCÈS');\r\n            } catch (error) {\r\n                console.error('❌ ❌ ERREUR CRITIQUE VIDÉO LOCALE:', error);\r\n            }\r\n        } else {\r\n            console.log('⚠️ CONDITIONS NON REMPLIES pour vidéo locale:', {\r\n                hasTrack: !!agoraHook.localVideoTrack,\r\n                hasContainer: !!localVideoRef.current,\r\n                isEnabled: agoraHook.isVideoEnabled,\r\n                notScreenShare: !agoraHook.isScreenSharing\r\n            });\r\n        }\r\n    }, [agoraHook.localVideoTrack, agoraHook.isVideoEnabled, agoraHook.isScreenSharing, agoraHook.isJoined, isTeacher]);\r\n\r\n    // EFFET 6: Partage d'écran\r\n    useEffect(() => {\r\n        if (agoraHook.screenTrack && screenVideoRef.current) {\r\n            try {\r\n                console.log('🖥️ Affichage partage d\\'écran');\r\n                agoraHook.screenTrack.play(screenVideoRef.current);\r\n            } catch (error) {\r\n                console.error('❌ Erreur partage d\\'écran:', error);\r\n            }\r\n        }\r\n    }, [agoraHook.screenTrack]);\r\n\r\n    // ==========================================\r\n    // FONCTIONS MÉTIER\r\n    // ==========================================\r\n\r\n    const fetchSessionDetails = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            console.log('📡 API: Récupération session', memoizedSessionId);\r\n\r\n            const response = await axios.get(`${API_URL}/api/live/session/${memoizedSessionId}`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            const sessionData = response.data.session;\r\n            const participantsData = response.data.participants || [];\r\n            const isParticipantData = response.data.isParticipant;\r\n\r\n            console.log('✅ Données reçues:', {\r\n                session: sessionData?.title,\r\n                participants: participantsData.length,\r\n                isParticipant: isParticipantData\r\n            });\r\n\r\n            setSession(sessionData);\r\n            setParticipants(participantsData);\r\n            setIsParticipant(isParticipantData);\r\n\r\n            if (!isParticipantData) {\r\n                console.log('⚠️ Connexion nécessaire...');\r\n                await handleJoinSessionAPI();\r\n            } else {\r\n                console.log('✅ Déjà connecté, chargement messages...');\r\n                await loadMessages();\r\n            }\r\n\r\n            setSessionLoaded(true);\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erreur fetch session:', error);\r\n            setError(error.response?.data?.error || 'Impossible de charger la session');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleJoinSessionAPI = async () => {\r\n        try {\r\n            console.log('🔐 Connexion API...');\r\n\r\n            const response = await axios.post(`${API_URL}/api/live/join-session/${memoizedSessionId}`, {}, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            console.log('✅ Connexion API réussie');\r\n            setIsParticipant(true);\r\n            await loadMessages();\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erreur connexion API:', error);\r\n\r\n            if (error.response?.status === 401) {\r\n                const password = prompt('Mot de passe requis :');\r\n                if (password) {\r\n                    try {\r\n                        await axios.post(`${API_URL}/api/live/join-session/${memoizedSessionId}`,\r\n                            { password },\r\n                            { headers: { Authorization: `Bearer ${token}` } }\r\n                        );\r\n                        setIsParticipant(true);\r\n                        await loadMessages();\r\n                    } catch (passwordError) {\r\n                        setError('Mot de passe incorrect');\r\n                    }\r\n                }\r\n            } else {\r\n                setError('Impossible de rejoindre la session');\r\n            }\r\n        }\r\n    };\r\n\r\n    const loadMessages = async () => {\r\n        try {\r\n            console.log('💬 Chargement messages...');\r\n            const response = await axios.get(`${API_URL}/api/live/session/${memoizedSessionId}/chat`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setMessages(response.data || []);\r\n        } catch (error) {\r\n            console.warn('⚠️ Messages non disponibles:', error);\r\n            setMessages([]);\r\n        }\r\n    };\r\n\r\n    const handleRetryAgora = useCallback(async () => {\r\n        setError(null);\r\n        hasJoinedAgoraRef.current = false;\r\n        isJoiningRef.current = false;\r\n        await handleJoinAgora();\r\n    }, [handleJoinAgora]);\r\n\r\n    const handleSendMessage = useCallback((e) => {\r\n        e.preventDefault();\r\n\r\n        if (!newMessage.trim() || !isConnected || !isParticipant) {\r\n            return;\r\n        }\r\n\r\n        console.log('💬 Envoi:', newMessage.trim());\r\n        sendMessage(memoizedSessionId, newMessage.trim());\r\n        setNewMessage('');\r\n\r\n        setTimeout(() => {\r\n            messageInputRef.current?.focus();\r\n        }, 100);\r\n    }, [newMessage, isConnected, isParticipant, sendMessage, memoizedSessionId]);\r\n\r\n    const handleLeaveSession = useCallback(async () => {\r\n        if (window.confirm('Êtes-vous sûr de vouloir quitter cette session ?')) {\r\n            try {\r\n                await agoraHook.leaveChannel();\r\n                if (isConnected && isParticipant) {\r\n                    leaveSession(memoizedSessionId);\r\n                }\r\n                navigate('/live');\r\n            } catch (error) {\r\n                console.error('❌ Erreur départ:', error);\r\n                navigate('/live');\r\n            }\r\n        }\r\n    }, [agoraHook.leaveChannel, isConnected, isParticipant, leaveSession, memoizedSessionId, navigate]);\r\n\r\n    // Contrôles média - CORRIGÉS\r\n    const handleToggleCamera = useCallback(async () => {\r\n        console.log('🎥 TOGGLE CAMÉRA - État actuel:', {\r\n            isVideoEnabled: agoraHook.isVideoEnabled,\r\n            hasLocalTrack: !!agoraHook.localVideoTrack,\r\n            isJoined: agoraHook.isJoined,\r\n            isTeacher: isTeacher\r\n        });\r\n\r\n        try {\r\n            if (agoraHook.isVideoEnabled) {\r\n                console.log('📹 DÉSACTIVATION caméra...');\r\n                await agoraHook.disableCamera();\r\n                if (isConnected && isParticipant) {\r\n                    sendMessage(memoizedSessionId, `📹 ${user.name} a désactivé sa caméra`);\r\n                }\r\n                console.log('✅ Caméra désactivée');\r\n            } else {\r\n                console.log('📹 ACTIVATION caméra...');\r\n                await agoraHook.enableCamera();\r\n                if (isConnected && isParticipant) {\r\n                    sendMessage(memoizedSessionId, `📹 ${user.name} a activé sa caméra`);\r\n                }\r\n                console.log('✅ Caméra activée');\r\n            }\r\n        } catch (error) {\r\n            console.error('❌ ❌ ERREUR CRITIQUE CAMÉRA:', error);\r\n        }\r\n    }, [agoraHook.isVideoEnabled, agoraHook.enableCamera, agoraHook.disableCamera, isConnected, isParticipant, sendMessage, memoizedSessionId, user?.name, isTeacher]);\r\n\r\n    const handleToggleAudio = useCallback(async () => {\r\n        console.log('🎤 TOGGLE AUDIO - État actuel:', {\r\n            isAudioEnabled: agoraHook.isAudioEnabled,\r\n            hasLocalAudioTrack: !!agoraHook.localAudioTrack,\r\n            isJoined: agoraHook.isJoined,\r\n            isMuted: agoraHook.isMuted\r\n        });\r\n\r\n        try {\r\n            if (agoraHook.isAudioEnabled) {\r\n                console.log('🔇 DÉSACTIVATION audio...');\r\n                await agoraHook.disableAudio();\r\n                if (isConnected && isParticipant) {\r\n                    sendMessage(memoizedSessionId, `🎤 ${user.name} a désactivé son micro`);\r\n                }\r\n                console.log('✅ Audio désactivé');\r\n            } else {\r\n                console.log('🔊 ACTIVATION audio...');\r\n                await agoraHook.enableAudio();\r\n                if (isConnected && isParticipant) {\r\n                    sendMessage(memoizedSessionId, `🎤 ${user.name} a activé son micro`);\r\n                }\r\n                console.log('✅ Audio activé');\r\n            }\r\n        } catch (error) {\r\n            console.error('❌ ❌ ERREUR CRITIQUE AUDIO:', error);\r\n        }\r\n    }, [agoraHook.isAudioEnabled, agoraHook.enableAudio, agoraHook.disableAudio, isConnected, isParticipant, sendMessage, memoizedSessionId, user?.name]);\r\n\r\n    const handleToggleScreenShare = useCallback(async () => {\r\n        try {\r\n            if (agoraHook.isScreenSharing) {\r\n                await agoraHook.stopScreenShare();\r\n                if (isConnected && isParticipant) {\r\n                    sendMessage(memoizedSessionId, `🖥️ ${user.name} a arrêté le partage d'écran`);\r\n                }\r\n            } else {\r\n                await agoraHook.startScreenShare();\r\n                if (isConnected && isParticipant) {\r\n                    sendMessage(memoizedSessionId, `🖥️ ${user.name} partage son écran`);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('❌ Erreur partage d\\'écran:', error);\r\n        }\r\n    }, [agoraHook.isScreenSharing, agoraHook.startScreenShare, agoraHook.stopScreenShare, isConnected, isParticipant, sendMessage, memoizedSessionId, user?.name]);\r\n\r\n    // ==========================================\r\n    // FONCTIONS UTILITAIRES\r\n    // ==========================================\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    const formatTime = (dateString) => {\r\n        return new Date(dateString).toLocaleTimeString('fr-FR', {\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    const getUserIcon = (accountType) => {\r\n        switch (accountType) {\r\n            case 'teacher': return <FaUserGraduate className=\"user-icon teacher\" />;\r\n            case 'parent': return <FaCrown className=\"user-icon parent\" />;\r\n            case 'child': return <FaChild className=\"user-icon child\" />;\r\n            default: return null;\r\n        }\r\n    };\r\n\r\n    const getNetworkQualityStatus = () => {\r\n        if (agoraHook.networkQuality >= 4) return { icon: FaWifi, color: '#28a745' };\r\n        if (agoraHook.networkQuality >= 2) return { icon: FaWifi, color: '#ffc107' };\r\n        return { icon: FaExclamationTriangle, color: '#dc3545' };\r\n    };\r\n\r\n    // ==========================================\r\n    // RENDU CONDITIONNEL\r\n    // ==========================================\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"live-session-container\">\r\n                <div className=\"loading-spinner\">\r\n                    <div className=\"spinner\"></div>\r\n                    <p>Chargement de la session...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error && !session) {\r\n        return (\r\n            <div className=\"live-session-container\">\r\n                <div className=\"error-message\">\r\n                    <h2>Erreur</h2>\r\n                    <p>{error}</p>\r\n                    <button onClick={() => navigate('/live')} className=\"back-btn\">\r\n                        Retour au menu Live\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const networkStatus = getNetworkQualityStatus();\r\n    const NetworkIcon = networkStatus.icon;\r\n\r\n    // ==========================================\r\n    // RENDU PRINCIPAL\r\n    // ==========================================\r\n\r\n    return (\r\n        <div className=\"live-session-container\">\r\n            {/* Header de la session */}\r\n            <div className=\"session-header\">\r\n                <div className=\"header-left\">\r\n                    <button onClick={() => navigate('/live')} className=\"live-session-back-button\">\r\n                        <FaArrowLeft />\r\n                    </button>\r\n                    <div className=\"session-info\">\r\n                        <div className=\"session-status\">\r\n                            <div className={`status-indicator ${session?.status === 'live' ? 'live' : session?.status === 'ended' ? 'ended' : 'waiting'}`}></div>\r\n                            <span className=\"status-text\">\r\n                                {session?.status === 'live' ? 'EN DIRECT' :\r\n                                    session?.status === 'ended' ? 'TERMINÉ' :\r\n                                        'EN ATTENTE'}\r\n                            </span>\r\n                        </div>\r\n                        <h1>{session?.title}</h1>\r\n                        <p className=\"session-details\">\r\n                            <span>Par {session?.teacher_name}</span>\r\n                            <span>•</span>\r\n                            <span>{session?.subject}</span>\r\n                            <span>•</span>\r\n                            <span>Code: {session?.room_code}</span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"header-right\">\r\n                    {/* Bouton Démarrer/Arrêter pour le professeur */}\r\n                    {isTeacher && isParticipant && (\r\n                        <div className=\"live-control-section\">\r\n                            {session?.status === 'waiting' && (\r\n                                <button\r\n                                    onClick={handleStartLive}\r\n                                    className=\"start-live-btn\"\r\n                                    disabled={agoraHook.isConnecting}\r\n                                >\r\n                                    <FaPlay /> Démarrer le Live\r\n                                </button>\r\n                            )}\r\n\r\n                            {session?.status === 'live' && (\r\n                                <button\r\n                                    onClick={handleStopLive}\r\n                                    className=\"stop-live-btn\"\r\n                                >\r\n                                    <FaStop /> Arrêter le Live\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Contrôles média - POUR TOUS LES PARTICIPANTS connectés */}\r\n                    {isParticipant && agoraHook.isJoined && (\r\n                        <div className=\"teacher-controls\">\r\n                            <button\r\n                                onClick={handleToggleCamera}\r\n                                className={`control-btn video-btn ${agoraHook.isVideoEnabled ? 'active' : ''}`}\r\n                                title={agoraHook.isVideoEnabled ? 'Désactiver la caméra' : 'Activer la caméra'}\r\n                                disabled={agoraHook.isConnecting}\r\n                            >\r\n                                {agoraHook.isVideoEnabled ? <FaVideo /> : <FaVideoSlash />}\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={handleToggleAudio}\r\n                                className={`control-btn audio-btn ${agoraHook.isAudioEnabled ? 'active' : ''}`}\r\n                                title={agoraHook.isAudioEnabled ? 'Désactiver le micro' : 'Activer le micro'}\r\n                                disabled={agoraHook.isConnecting}\r\n                            >\r\n                                {agoraHook.isAudioEnabled ? <FaMicrophone /> : <FaMicrophoneSlash />}\r\n                            </button>\r\n\r\n                            {agoraHook.isAudioEnabled && (\r\n                                <button\r\n                                    onClick={agoraHook.toggleMute}\r\n                                    className={`control-btn mute-btn ${agoraHook.isMuted ? 'muted' : ''}`}\r\n                                    title={agoraHook.isMuted ? 'Réactiver le son' : 'Couper le son'}\r\n                                >\r\n                                    {agoraHook.isMuted ? <FaVolumeMute /> : <FaVolumeUp />}\r\n                                </button>\r\n                            )}\r\n\r\n                            {/* Partage d'écran - seulement pour le professeur */}\r\n                            {isTeacher && (\r\n                                <button\r\n                                    onClick={handleToggleScreenShare}\r\n                                    className={`control-btn screen-btn ${agoraHook.isScreenSharing ? 'active' : ''}`}\r\n                                    title={agoraHook.isScreenSharing ? 'Arrêter le partage' : 'Partager l\\'écran'}\r\n                                    disabled={agoraHook.isConnecting || !agoraHook.isJoined}\r\n                                >\r\n                                    {agoraHook.isScreenSharing ? <FaStop /> : <FaDesktop />}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"connection-status\">\r\n                        <div className={`status-indicator ${isConnected && agoraHook.isJoined ? 'connected' : 'disconnected'}`}></div>\r\n                        <span>{isConnected && agoraHook.isJoined ? 'Connecté' : 'Déconnecté'}</span>\r\n                        <NetworkIcon style={{ color: networkStatus.color, marginLeft: '8px' }} />\r\n                    </div>\r\n\r\n                    <div className=\"participants-count\">\r\n                        <FaUsers />\r\n                        <span>{participants.length + agoraHook.remoteUsers.length}</span>\r\n                    </div>\r\n\r\n                    <button onClick={handleLeaveSession} className=\"leave-button\">\r\n                        <FaSignOutAlt />\r\n                        Quitter\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Messages d'erreur */}\r\n            {(agoraHook.connectionError || error) && (\r\n                <div className=\"error-banner\">\r\n                    <FaExclamationTriangle />\r\n                    <span>{agoraHook.connectionError || error}</span>\r\n                    {agoraHook.connectionError && (\r\n                        <button onClick={handleRetryAgora} className=\"retry-connection-btn\">\r\n                            <FaRedo /> Réessayer\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* NOUVEAU: Bannière pour débloquer l'audio */}\r\n            {agoraHook.audioAutoplayBlocked && (\r\n                <div className=\"error-banner\" style={{ background: 'linear-gradient(45deg, #ff9800, #f57c00)' }}>\r\n                    <FaPlayCircle />\r\n                    <span>Son bloqué par le navigateur. Cliquez pour activer l'audio.</span>\r\n                    <button onClick={handleEnableAudioPlayback} className=\"retry-connection-btn\">\r\n                        <FaPlayCircle /> Activer le son\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* Contenu principal avec disposition améliorée */}\r\n            <div className=\"session-content\">\r\n\r\n                {/* Zone principale - Vidéo + Chat */}\r\n                <div className=\"main-content\">\r\n\r\n                    {/* Zone vidéo/présentation - LOGIQUE CORRIGÉE */}\r\n                    <div className=\"video-section\">\r\n                        <div className=\"main-video-container\">\r\n                            <div className=\"video-display-area\">\r\n                                {agoraHook.isScreenSharing && agoraHook.screenTrack ? (\r\n                                    /* Partage d'écran */\r\n                                    <div className=\"screen-share-container\">\r\n                                        <div ref={screenVideoRef} className=\"screen-video\" />\r\n                                        <div className=\"video-overlay\">\r\n                                            🖥️ Partage d'écran - {user?.name}\r\n                                        </div>\r\n                                    </div>\r\n                                ) : (\r\n                                    /* Zone vidéo CORRIGÉE */\r\n                                    <div className=\"video-streams-container\">\r\n\r\n                                        {/* PROFESSEUR - Voit SA caméra */}\r\n                                        {isTeacher && (\r\n                                            <div className=\"teacher-own-video\">\r\n                                                <div\r\n                                                    ref={localVideoRef}\r\n                                                    className=\"video-element\"\r\n                                                    style={{\r\n                                                        width: '100%',\r\n                                                        height: '400px',\r\n                                                        background: '#000',\r\n                                                        borderRadius: '12px'\r\n                                                    }}\r\n                                                />\r\n                                                {!agoraHook.isVideoEnabled && (\r\n                                                    <div className=\"video-placeholder-overlay\">\r\n                                                        <div className=\"video-placeholder-icon\">\r\n                                                            <FaVideo size={60} />\r\n                                                        </div>\r\n                                                        <h3>👨‍🏫 Vous (Professeur)</h3>\r\n                                                        <p>Activez votre caméra pour que les élèves vous voient</p>\r\n                                                        <button\r\n                                                            onClick={handleToggleCamera}\r\n                                                            className=\"activate-camera-btn\"\r\n                                                        >\r\n                                                            <FaVideo /> Activer la caméra\r\n                                                        </button>\r\n                                                    </div>\r\n                                                )}\r\n                                                <div className=\"video-overlay\">\r\n                                                    👨‍🏫 Vous (Professeur) - Les élèves vous voient\r\n                                                    {agoraHook.isAudioEnabled ? (agoraHook.isMuted ? ' 🔇' : ' 🎤') : ' 🔇'}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* ÉLÈVE - Voit le PROFESSEUR - CORRIGÉ */}\r\n                                        {!isTeacher && (\r\n                                            <div className=\"student-sees-teacher\">\r\n                                                {agoraHook.remoteUsers.length > 0 ? (\r\n                                                    /* Il y a un professeur connecté */\r\n                                                    <div className=\"teacher-video-for-student\">\r\n                                                        {(() => {\r\n                                                            // Trouver le professeur avec vidéo\r\n                                                            const teacherWithVideo = agoraHook.remoteUsers.find(u => u.hasVideo && u.videoTrack);\r\n\r\n                                                            if (teacherWithVideo) {\r\n                                                                console.log('✅ PROFESSEUR AVEC VIDÉO TROUVÉ:', teacherWithVideo.uid);\r\n                                                                return (\r\n                                                                    <div style={{ position: 'relative', width: '100%', height: '400px' }}>\r\n                                                                        <RemoteVideoDisplay\r\n                                                                            user={teacherWithVideo}\r\n                                                                            isMain={true}\r\n                                                                        />\r\n                                                                        <div className=\"video-overlay\">\r\n                                                                            👨‍🏫 Professeur {teacherWithVideo.uid}\r\n                                                                            {teacherWithVideo.hasAudio ? ' 🎤' : ' 🔇'}\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                );\r\n                                                            } else {\r\n                                                                // Professeur connecté mais pas de vidéo\r\n                                                                const anyTeacher = agoraHook.remoteUsers[0];\r\n                                                                console.log('⚠️ PROFESSEUR SANS VIDÉO:', anyTeacher?.uid);\r\n                                                                return (\r\n                                                                    <div style={{\r\n                                                                        width: '100%',\r\n                                                                        height: '400px',\r\n                                                                        background: '#1a1a1a',\r\n                                                                        borderRadius: '12px',\r\n                                                                        display: 'flex',\r\n                                                                        flexDirection: 'column',\r\n                                                                        alignItems: 'center',\r\n                                                                        justifyContent: 'center',\r\n                                                                        color: 'white',\r\n                                                                        position: 'relative'\r\n                                                                    }}>\r\n                                                                        <FaVideo style={{ fontSize: '60px', marginBottom: '20px', color: '#666' }} />\r\n                                                                        <h3>👨‍🏫 Professeur connecté</h3>\r\n                                                                        <p>En attente que le professeur active sa caméra...</p>\r\n                                                                        {anyTeacher && (\r\n                                                                            <div className=\"video-overlay\">\r\n                                                                                👨‍🏫 Prof {anyTeacher.uid} (caméra éteinte)\r\n                                                                                {anyTeacher.hasAudio ? ' 🎤' : ' 🔇'}\r\n                                                                            </div>\r\n                                                                        )}\r\n\r\n                                                                        {/* IMPORTANT: Container caché pour la vidéo quand elle arrive */}\r\n                                                                        {anyTeacher && (\r\n                                                                            <div\r\n                                                                                style={{\r\n                                                                                    position: 'absolute',\r\n                                                                                    top: 0,\r\n                                                                                    left: 0,\r\n                                                                                    width: '100%',\r\n                                                                                    height: '100%',\r\n                                                                                    opacity: 0,\r\n                                                                                    pointerEvents: 'none'\r\n                                                                                }}\r\n                                                                            >\r\n                                                                                <RemoteVideoDisplay\r\n                                                                                    user={anyTeacher}\r\n                                                                                    isMain={true}\r\n                                                                                />\r\n                                                                            </div>\r\n                                                                        )}\r\n                                                                    </div>\r\n                                                                );\r\n                                                            }\r\n                                                        })()}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    /* Pas de professeur */\r\n                                                    <div className=\"waiting-for-teacher-simple\">\r\n                                                        <div style={{\r\n                                                            width: '100%',\r\n                                                            height: '400px',\r\n                                                            background: '#1a1a1a',\r\n                                                            borderRadius: '12px',\r\n                                                            display: 'flex',\r\n                                                            flexDirection: 'column',\r\n                                                            alignItems: 'center',\r\n                                                            justifyContent: 'center',\r\n                                                            color: 'white'\r\n                                                        }}>\r\n                                                            <FaVideo style={{ fontSize: '60px', marginBottom: '20px', color: '#666' }} />\r\n                                                            <h3>En attente du professeur...</h3>\r\n                                                            <p>Le professeur va bientôt se connecter</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                                {/* MINIATURE - SA propre caméra si activée */}\r\n                                                {agoraHook.localVideoTrack && agoraHook.isVideoEnabled && (\r\n                                                    <div className=\"self-video-miniature\" style={{\r\n                                                        position: 'absolute',\r\n                                                        top: '20px',\r\n                                                        right: '20px',\r\n                                                        width: '200px',\r\n                                                        height: '150px',\r\n                                                        background: '#000',\r\n                                                        borderRadius: '8px',\r\n                                                        border: '2px solid #fff',\r\n                                                        zIndex: 10\r\n                                                    }}>\r\n                                                        <div\r\n                                                            ref={localVideoRef}\r\n                                                            style={{\r\n                                                                width: '100%',\r\n                                                                height: '100%',\r\n                                                                borderRadius: '6px'\r\n                                                            }}\r\n                                                        />\r\n                                                        <div style={{\r\n                                                            position: 'absolute',\r\n                                                            bottom: '5px',\r\n                                                            left: '5px',\r\n                                                            background: 'rgba(0,0,0,0.8)',\r\n                                                            color: 'white',\r\n                                                            padding: '2px 6px',\r\n                                                            borderRadius: '4px',\r\n                                                            fontSize: '12px'\r\n                                                        }}>\r\n                                                            Vous\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Debug AMÉLIORÉ - TOUJOURS VISIBLE */}\r\n                                <div className=\"debug-simple\" style={{\r\n                                    position: 'absolute',\r\n                                    top: '10px',\r\n                                    left: '10px',\r\n                                    background: 'rgba(0, 0, 0, 0.9)',\r\n                                    color: 'white',\r\n                                    padding: '10px',\r\n                                    borderRadius: '8px',\r\n                                    fontSize: '12px',\r\n                                    zIndex: 20,\r\n                                    fontFamily: 'monospace',\r\n                                    minWidth: '180px'\r\n                                }}>\r\n                                    <strong>{isTeacher ? '👨‍🏫 PROF' : '👤 ÉLÈVE'}</strong><br/>\r\n                                    Agora: {agoraHook.isJoined ? '✅' : '❌'}<br/>\r\n                                    {isTeacher ? (\r\n                                        <>\r\n                                            Ma caméra: {agoraHook.isVideoEnabled ? '✅' : '❌'}<br/>\r\n                                            Mon micro: {agoraHook.isAudioEnabled ? '✅' : '❌'}<br/>\r\n                                            Muté: {agoraHook.isMuted ? '🔇' : '🔊'}<br/>\r\n                                            Élèves: {agoraHook.remoteUsers.length}<br/>\r\n                                            {agoraHook.remoteUsers.map((u, i) => (\r\n                                                <span key={u.uid}>\r\n                                                    E{i+1}: V{u.hasVideo ? '✅' : '❌'} A{u.hasAudio ? '✅' : '❌'}<br/>\r\n                                                </span>\r\n                                            ))}\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            Prof connecté: {agoraHook.remoteUsers.length > 0 ? '✅' : '❌'}<br/>\r\n                                            {agoraHook.remoteUsers.length > 0 && (\r\n                                                <>\r\n                                                    Vidéo prof: {agoraHook.remoteUsers.some(u => u.hasVideo && u.videoTrack) ? '✅' : '❌'}<br/>\r\n                                                    Audio prof: {agoraHook.remoteUsers.some(u => u.hasAudio && u.audioTrack) ? '✅' : '❌'}<br/>\r\n                                                    Prof UID: {agoraHook.remoteUsers[0]?.uid}<br/>\r\n                                                </>\r\n                                            )}\r\n                                            Ma caméra: {agoraHook.isVideoEnabled ? '✅' : '❌'}<br/>\r\n                                            Mon micro: {agoraHook.isAudioEnabled ? '✅' : '❌'}\r\n                                        </>\r\n                                    )}\r\n                                    {agoraHook.connectionError && (\r\n                                        <div style={{ color: '#ff4444', marginTop: '5px' }}>\r\n                                            ❌ {agoraHook.connectionError}\r\n                                        </div>\r\n                                    )}\r\n                                    {agoraHook.audioAutoplayBlocked && (\r\n                                        <div style={{ color: '#ff9800', marginTop: '5px' }}>\r\n                                            🔊 Audio bloqué\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* CORRECTION MAJEURE: Vidéos des participants distants - AFFICHAGE CORRIGÉ */}\r\n                            {agoraHook.remoteUsers.length > 0 && (\r\n                                <div className=\"secondary-videos\">\r\n                                    <h4>\r\n                                        {isTeacher\r\n                                            ? `Élèves connectés (${agoraHook.remoteUsers.length})`\r\n                                            : `Autres participants (${agoraHook.remoteUsers.length > 1 ? agoraHook.remoteUsers.length - 1 : 0})`\r\n                                        }\r\n                                    </h4>\r\n                                    <div className=\"remote-videos-grid\" style={{\r\n                                        display: 'grid',\r\n                                        gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n                                        gap: '12px',\r\n                                        marginTop: '12px'\r\n                                    }}>\r\n                                        {isTeacher ? (\r\n                                            /* PROFESSEUR: Affiche TOUS les élèves */\r\n                                            agoraHook.remoteUsers.map((remoteUser) => (\r\n                                                <div key={remoteUser.uid} className=\"secondary-video-item\">\r\n                                                    <div className=\"secondary-video-container\">\r\n                                                        {remoteUser.hasVideo && remoteUser.videoTrack ? (\r\n                                                            <RemoteVideoDisplay user={remoteUser} />\r\n                                                        ) : (\r\n                                                            <div className=\"video-placeholder-secondary\" style={{\r\n                                                                width: '100%',\r\n                                                                height: '120px',\r\n                                                                display: 'flex',\r\n                                                                alignItems: 'center',\r\n                                                                justifyContent: 'center',\r\n                                                                background: '#1a1a1a',\r\n                                                                borderRadius: '8px'\r\n                                                            }}>\r\n                                                                <FaVideo size={20} style={{ color: '#666' }} />\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"secondary-video-label\">\r\n                                                        👤 Élève {remoteUser.uid}\r\n                                                        {remoteUser.hasAudio ? ' 🎤' : ' 🔇'}\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        ) : (\r\n                                            /* ÉLÈVE: Affiche les autres élèves (pas le prof qui est en grand) */\r\n                                            agoraHook.remoteUsers.slice(1).map((remoteUser) => (\r\n                                                <div key={remoteUser.uid} className=\"secondary-video-item\">\r\n                                                    <div className=\"secondary-video-container\">\r\n                                                        {remoteUser.hasVideo && remoteUser.videoTrack ? (\r\n                                                            <RemoteVideoDisplay user={remoteUser} />\r\n                                                        ) : (\r\n                                                            <div className=\"video-placeholder-secondary\" style={{\r\n                                                                width: '100%',\r\n                                                                height: '120px',\r\n                                                                display: 'flex',\r\n                                                                alignItems: 'center',\r\n                                                                justifyContent: 'center',\r\n                                                                background: '#1a1a1a',\r\n                                                                borderRadius: '8px'\r\n                                                            }}>\r\n                                                                <FaVideo size={20} style={{ color: '#666' }} />\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"secondary-video-label\">\r\n                                                        👤 Participant {remoteUser.uid}\r\n                                                        {remoteUser.hasAudio ? ' 🎤' : ' 🔇'}\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chat */}\r\n                    <div className=\"chat-section\">\r\n                        <div className=\"chat-header\">\r\n                            <h3>💬 Chat de la session</h3>\r\n                            <div className=\"chat-status\">\r\n                                <div className={`status-indicator ${isConnected ? 'connected' : 'disconnected'}`}></div>\r\n                                <span>{isConnected ? 'En ligne' : 'Hors ligne'}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"chat-messages\">\r\n                            {messages.map(message => (\r\n                                <div key={message.id} className={`message ${message.message_type} ${message.user_id === user.id ? 'own' : 'other'}`}>\r\n                                    {message.message_type === 'system' ? (\r\n                                        <div className=\"system-message\">\r\n                                            <span>{message.message}</span>\r\n                                            <time>{formatTime(message.created_at)}</time>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <>\r\n                                            {message.user_id !== user.id && (\r\n                                                <div className=\"message-avatar\">\r\n                                                    {message.profile_picture ? (\r\n                                                        <img src={`${API_URL}/uploads/${message.profile_picture}`} alt={message.user_name} />\r\n                                                    ) : (\r\n                                                        <span>{message.user_name?.charAt(0).toUpperCase()}</span>\r\n                                                    )}\r\n                                                </div>\r\n                                            )}\r\n                                            <div className=\"message-content\">\r\n                                                {message.user_id !== user.id && (\r\n                                                    <div className=\"message-header\">\r\n                                                        <span className=\"message-author\">{message.user_name}</span>\r\n                                                        {getUserIcon(message.account_type)}\r\n                                                        <time className=\"message-time\">{formatTime(message.created_at)}</time>\r\n                                                    </div>\r\n                                                )}\r\n                                                <div className=\"message-bubble\">\r\n                                                    <p>{message.message}</p>\r\n                                                    {message.user_id === user.id && (\r\n                                                        <time className=\"message-time\">{formatTime(message.created_at)}</time>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                            <div ref={messagesEndRef} />\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSendMessage} className=\"chat-input-form\">\r\n                            <div className=\"chat-input-container\">\r\n                                <input\r\n                                    ref={messageInputRef}\r\n                                    type=\"text\"\r\n                                    value={newMessage}\r\n                                    onChange={(e) => setNewMessage(e.target.value)}\r\n                                    placeholder={\r\n                                        !isParticipant ? \"Rejoindre la session...\" :\r\n                                            !isConnected ? \"Chat hors ligne...\" :\r\n                                                \"Tapez votre message...\"\r\n                                    }\r\n                                    className=\"chat-input\"\r\n                                    maxLength={500}\r\n                                    disabled={!isConnected || !isParticipant}\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"send-button\"\r\n                                    disabled={!newMessage.trim() || !isConnected || !isParticipant}\r\n                                >\r\n                                    <FaPaperPlane />\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"chat-status-footer\">\r\n                                {!isParticipant && <span className=\"status-connecting\">📝 Rejoindre la session...</span>}\r\n                                {!isConnected && isParticipant && <span className=\"status-offline\">❌ Chat déconnecté</span>}\r\n                                {isConnected && !agoraHook.isJoined && <span className=\"status-connecting\">🔄 Connexion vidéo...</span>}\r\n                                {isConnected && agoraHook.isJoined && isParticipant && <span className=\"status-online\">✅ En ligne</span>}\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sidebar - Participants */}\r\n                <div className=\"participants-sidebar\">\r\n                    <div className=\"participants-header\">\r\n                        <FaUsers />\r\n                        <span>Participants ({participants.length})</span>\r\n                    </div>\r\n                    <div className=\"participants-list\">\r\n                        {participants.map(participant => (\r\n                            <div key={participant.user_id} className={`participant ${participant.role}`}>\r\n                                <div className=\"participant-avatar\">\r\n                                    {participant.profile_picture ? (\r\n                                        <img src={`${API_URL}/uploads/${participant.profile_picture}`} alt={participant.user_name} />\r\n                                    ) : (\r\n                                        <span>{participant.user_name?.charAt(0).toUpperCase()}</span>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"participant-info\">\r\n                                    <span className=\"participant-name\">{participant.user_name}</span>\r\n                                    <div className=\"participant-role\">\r\n                                        {getUserIcon(participant.role)}\r\n                                        {participant.role === 'teacher' ? 'Professeur' :\r\n                                            participant.role === 'parent' ? 'Parent' : 'Élève'}\r\n                                    </div>\r\n                                </div>\r\n                                {participant.role === 'teacher' && (\r\n                                    <FaCrown className=\"teacher-crown\" />\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LiveSession;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}